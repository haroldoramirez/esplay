{"version":3,"sources":["app.js","services/moment.js","services/calendarhelper.js","filters/truncateEventTitle.js","directives/mwlcalendaryear.js","directives/mwlcalendarweek.js","directives/mwlcalendarmonth.js","directives/mwlcalendarday.js","directives/mwlcalendar.js"],"names":["angular","module","constant","window","moment","service","$filter","isISOWeekBasedOnLocale","startOf","day","isISOWeek","userValue","isDefined","self","this","getMonthNames","short","format","months","i","push","Date","getWeekDayNames","useISOWeek","weekdays","startDay","eventIsInPeriod","eventStart","eventEnd","periodStart","periodEnd","isAfter","isBefore","isSame","getYearView","events","currentDay","grid","row","j","monthIndex","length","startPeriod","endPeriod","add","subtract","toDate","label","shift","isToday","filter","event","starts_at","ends_at","date","getMonthView","getWeekDayIndex","startOfMonth","dateOffset","numberOfDaysInMonth","endOf","buildRow","Array","eventsWithIds","map","index","$id","weekdayIndex","prefillMonth","clone","inMonth","postfillMonth","getWeekView","beginningOfWeek","endOfWeek","columns","weekDays","currentWeekDayIndex","getDay","weekDay","eventsSorted","offset","span","weekViewStart","weekViewEnd","diff","daySpan","dayOffset","getDayView","dayStartHour","dayEndHour","calendarStart","calendarEnd","calendarHeight","buckets","top","height","diffStart","left","cannotFitInABucket","forEach","bucket","bucketIndex","canFitInThisBucket","bucketItem","toggleEventBreakdown","view","rowIndex","cellIndex","closeAllOpenItems","isOpened","cell","openEvents","isCellOpened","string","boxHeight","substr","directive","$sce","$timeout","calendarHelper","templateUrl","restrict","require","scope","eventClick","eventEditClick","eventDeleteClick","editEventHtml","deleteEventHtml","autoOpen","timespanClick","link","element","attrs","calendarCtrl","updateView","firstRun","year","monthClicked","titleFunctions","$watch","yearIndex","$date","handler","drillDown","month","changeView","useIsoWeek","weekTitleLabel","titleLabel","week","replace","dayClicked","highlightEvent","shouldAddClass","highlightClass","dayContainsEvent","e","type","eventLabel","timeLabel","dayViewStart","dayViewEnd","hours","days","dayCounter","control","controller","$scope","$locale","newDay","prev","next","getTitle","firstRunWatcher","unbindWatcher","locale","id","originalView","copy","unbindDestroyListener","$on"],"mappings":"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","file":"angular-bootstrap-calendar.min.js","sourcesContent":["'use strict';\n\n/**\n * @ngdoc overview\n * @name angularBootstrapCalendarApp\n * @description\n * # angularBootstrapCalendarApp\n *\n * Main module of the application.\n */\nangular\n  .module('mwl.calendar', [\n    'ui.bootstrap'\n  ]);\n","'use strict';\n\n/**\n * @ngdoc service\n * @name angularBootstrapCalendarApp.moment\n * @description\n * # moment\n * Constant in the angularBootstrapCalendarApp.\n */\nangular.module('mwl.calendar')\n  .constant('moment', window.moment);\n","'use strict';\n\n/**\n * @ngdoc service\n * @name angularBootstrapCalendarApp.calendarHelper\n * @description\n * # calendarHelper\n * Service in the angularBootstrapCalendarApp.\n */\nangular.module('mwl.calendar')\n  .service('calendarHelper', function calendarHelper($filter, moment) {\n\n    var self = this;\n\n    function isISOWeekBasedOnLocale() {\n      return moment().startOf('week').day() === 1;\n    }\n\n    function isISOWeek(userValue) {\n      //If a manual override has been set in the directive, use that\n      if (angular.isDefined(userValue)) return userValue;\n      //Otherwise fallback to the locale\n      return isISOWeekBasedOnLocale();\n    }\n\n    this.getMonthNames = function(short) {\n\n      var format = short ? 'MMM' : 'MMMM';\n\n      var months = [];\n      for (var i = 0; i <= 11; i++) {\n        months.push($filter('date')(new Date(2014, i), format));\n      }\n\n      return months;\n\n    };\n\n    this.getWeekDayNames = function(short, useISOWeek) {\n\n      var format = short ? 'EEE' : 'EEEE';\n\n      var weekdays = [];\n      var startDay = isISOWeek(useISOWeek) ? 22 : 21;\n      for (var i = 0; i <= 6; i++) {\n        weekdays.push($filter('date')(new Date(2014, 8, startDay + i), format));\n      }\n\n      return weekdays;\n\n    };\n\n    this.eventIsInPeriod = function(eventStart, eventEnd, periodStart, periodEnd) {\n\n      return (\n          moment(eventStart).isAfter(moment(periodStart)) &&\n          moment(eventStart).isBefore(moment(periodEnd))\n        ) || (\n          moment(eventEnd).isAfter(moment(periodStart)) &&\n          moment(eventEnd).isBefore(moment(periodEnd))\n        ) || (\n          moment(eventStart).isBefore(moment(periodStart)) &&\n          moment(eventEnd).isAfter(moment(periodEnd))\n        ) || (\n          moment(eventStart).isSame(moment(periodStart))\n        ) || (\n          moment(eventEnd).isSame(moment(periodEnd))\n      );\n\n    };\n\n    this.getYearView = function(events, currentDay) {\n\n      var grid = [];\n      var months = self.getMonthNames();\n\n      for (var i = 0; i < 3; i++) {\n        var row = [];\n        for (var j = 0; j < 4; j++) {\n          var monthIndex = 12 - months.length;\n          var startPeriod = new Date(moment(currentDay).format('YYYY'), monthIndex, 1);\n          var endPeriod = moment(startPeriod).add(1, 'month').subtract(1, 'second').toDate();\n\n          row.push({\n            label: months.shift(),\n            monthIndex: monthIndex,\n            isToday: moment(startPeriod).startOf('month').isSame(moment().startOf('month')),\n            events: events.filter(function(event) {\n              return self.eventIsInPeriod(event.starts_at, event.ends_at, startPeriod, endPeriod);\n            }),\n            date: moment(startPeriod).startOf('month')\n          });\n        }\n        grid.push(row);\n      }\n\n      return grid;\n\n    };\n\n    this.getMonthView = function(events, currentDay, useISOWeek) {\n\n      var dateOffset = isISOWeek(useISOWeek) ? 1 : 0;\n\n      function getWeekDayIndex() {\n        var day = startOfMonth.day() - dateOffset;\n        if (day < 0) day = 6;\n        return day;\n      }\n\n      var startOfMonth = moment(currentDay).startOf('month');\n      var numberOfDaysInMonth = moment(currentDay).endOf('month').date();\n\n      var grid = [];\n      var buildRow = new Array(7);\n      var eventsWithIds = events.map(function(event, index) {\n        event.$id = index;\n        return event;\n      });\n\n      for (var i = 1; i <= numberOfDaysInMonth; i++) {\n\n        if (i == 1) {\n          var weekdayIndex = getWeekDayIndex(startOfMonth);\n          var prefillMonth = startOfMonth.clone();\n          while (weekdayIndex > 0) {\n            weekdayIndex--;\n            prefillMonth = prefillMonth.subtract(1, 'day');\n            buildRow[weekdayIndex] = {\n              label: prefillMonth.date(),\n              date: prefillMonth.clone(),\n              inMonth: false,\n              events: []\n            };\n          }\n        }\n\n        buildRow[getWeekDayIndex(startOfMonth)] = {\n          label: startOfMonth.date(),\n          inMonth: true,\n          isToday: moment().startOf('day').isSame(startOfMonth),\n          date: startOfMonth.clone(),\n          events: eventsWithIds.filter(function(event) {\n            return self.eventIsInPeriod(event.starts_at, event.ends_at, startOfMonth.clone().startOf('day'), startOfMonth.clone().endOf('day'));\n          })\n        };\n\n        if (i == numberOfDaysInMonth) {\n          var weekdayIndex = getWeekDayIndex(startOfMonth);\n          var postfillMonth = startOfMonth.clone();\n          while (weekdayIndex < 6) {\n            weekdayIndex++;\n            postfillMonth = postfillMonth.add(1, 'day');\n            buildRow[weekdayIndex] = {\n              label: postfillMonth.date(),\n              date: postfillMonth.clone(),\n              inMonth: false,\n              events: []\n            };\n          }\n        }\n\n        if (getWeekDayIndex(startOfMonth) === 6 || i == numberOfDaysInMonth) {\n          grid.push(buildRow);\n          buildRow = new Array(7);\n        }\n\n        startOfMonth = startOfMonth.add(1, 'day');\n\n      }\n\n      return grid;\n\n    };\n\n    this.getWeekView = function(events, currentDay, useISOWeek) {\n\n      var dateOffset = isISOWeek(useISOWeek) ? 1 : 0;\n      var columns = new Array(7);\n      var weekDays = self.getWeekDayNames(false, useISOWeek);\n      var currentWeekDayIndex = currentDay.getDay();\n      var beginningOfWeek, endOfWeek;\n\n      for (var i = currentWeekDayIndex; i >= 0; i--) {\n        var date = moment(currentDay).subtract(currentWeekDayIndex - i, 'days').add(dateOffset, 'day').toDate();\n        columns[i] = {\n          weekDay: weekDays[i],\n          day: $filter('date')(date, 'd'),\n          date: $filter('date')(date, 'd MMM'),\n          isToday: moment(date).startOf('day').isSame(moment().startOf('day'))\n        };\n        if (i == 0) {\n          beginningOfWeek = date;\n        } else if (i == 6) {\n          endOfWeek = date;\n        }\n      }\n\n      for (var i = currentWeekDayIndex + 1; i < 7; i++) {\n        var date = moment(currentDay).add(i - currentWeekDayIndex, 'days').add(dateOffset, 'day').toDate();\n        columns[i] = {\n          weekDay: weekDays[i],\n          day: $filter('date')(date, 'd'),\n          date: $filter('date')(date, 'd MMM'),\n          isToday: moment(date).startOf('day').isSame(moment().startOf('day'))\n        };\n        if (i == 0) {\n          beginningOfWeek = date;\n        } else if (i == 6) {\n          endOfWeek = date;\n        }\n      }\n\n      endOfWeek = moment(endOfWeek).endOf('day').toDate();\n      beginningOfWeek = moment(beginningOfWeek).startOf('day').toDate();\n\n      var eventsSorted = events.filter(function(event) {\n        return self.eventIsInPeriod(event.starts_at, event.ends_at, beginningOfWeek, endOfWeek);\n      }).map(function(event) {\n\n        var eventStart = moment(event.starts_at).startOf('day');\n        var eventEnd = moment(event.ends_at).startOf('day');\n        var weekViewStart = moment(beginningOfWeek).startOf('day');\n        var weekViewEnd = moment(endOfWeek).startOf('day');\n\n        var offset, span;\n\n        if (eventStart.isBefore(weekViewStart) || eventStart.isSame(weekViewStart)) {\n          offset = 0;\n        } else {\n          offset = eventStart.diff(weekViewStart, 'days');\n        }\n\n        if (eventEnd.isAfter(weekViewEnd)) {\n          eventEnd = weekViewEnd;\n        }\n\n        if (eventStart.isBefore(weekViewStart)) {\n          eventStart = weekViewStart;\n        }\n\n        span = moment(eventEnd).diff(eventStart, 'days') + 1;\n\n        event.daySpan = span;\n        event.dayOffset = offset;\n        return event;\n      });\n\n      return {columns: columns, events: eventsSorted};\n\n    };\n\n    this.getDayView = function(events, currentDay, dayStartHour, dayEndHour) {\n\n      var calendarStart = moment(currentDay).startOf('day').add(dayStartHour, 'hours');\n      var calendarEnd = moment(currentDay).startOf('day').add(dayEndHour, 'hours');\n      var calendarHeight = (dayEndHour - dayStartHour + 1) * 60;\n      var buckets = [];\n\n      return events.filter(function(event) {\n        return self.eventIsInPeriod(event.starts_at, event.ends_at, moment(currentDay).startOf('day').toDate(), moment(currentDay).endOf('day').toDate());\n      }).map(function(event) {\n        if (moment(event.starts_at).isBefore(calendarStart)) {\n          event.top = 0;\n        } else {\n          event.top = moment(event.starts_at).startOf('minute').diff(calendarStart.startOf('minute'), 'minutes') - 2;\n        }\n\n        if (moment(event.ends_at).isAfter(calendarEnd)) {\n          event.height = calendarHeight - event.top;\n        } else {\n          var diffStart = event.starts_at;\n          if (moment(event.starts_at).isBefore(calendarStart)) {\n            diffStart = calendarStart.toDate();\n          }\n          event.height = moment(event.ends_at).diff(diffStart, 'minutes');\n        }\n\n        if (event.top - event.height > calendarHeight) {\n          event.height = 0;\n        }\n\n        event.left = 0;\n\n        return event;\n      }).filter(function(event) {\n        return event.height > 0;\n      }).map(function(event) {\n\n        var cannotFitInABucket = true;\n        buckets.forEach(function(bucket, bucketIndex) {\n          var canFitInThisBucket = true;\n\n          bucket.forEach(function(bucketItem) {\n            if (self.eventIsInPeriod(event.starts_at, event.ends_at, bucketItem.starts_at, bucketItem.ends_at) || self.eventIsInPeriod(bucketItem.starts_at, bucketItem.ends_at, event.starts_at, event.ends_at)) {\n              canFitInThisBucket = false;\n            }\n          });\n\n          if (canFitInThisBucket && cannotFitInABucket) {\n            cannotFitInABucket = false;\n            event.left = bucketIndex * 150;\n            buckets[bucketIndex].push(event);\n          }\n\n        });\n\n        if (cannotFitInABucket) {\n          event.left = buckets.length * 150;\n          buckets.push([event]);\n        }\n\n        return event;\n\n      });\n\n    };\n\n    this.toggleEventBreakdown = function(view, rowIndex, cellIndex) {\n\n      var openEvents = [];\n\n      function closeAllOpenItems() {\n        view = view.map(function(row) {\n          row.isOpened = false;\n          return row.map(function(cell) {\n            cell.isOpened = false;\n            return cell;\n          });\n        });\n      }\n\n      if (view[rowIndex][cellIndex].events.length > 0) {\n\n        var isCellOpened = view[rowIndex][cellIndex].isOpened;\n\n        closeAllOpenItems();\n\n        view[rowIndex][cellIndex].isOpened = !isCellOpened;\n        view[rowIndex].isOpened = !isCellOpened;\n        openEvents = view[rowIndex][cellIndex].events;\n      } else {\n        closeAllOpenItems();\n      }\n\n      return {view: view, openEvents: openEvents};\n\n    };\n\n  });\n","'use strict';\n\n\nangular.module('mwl.calendar')\n  .filter('truncateEventTitle', function() {\n\n    return function(string, length, boxHeight) {\n      if (!string) return '';\n\n      //Only truncate if if actually needs truncating\n      if (string.length >= length && string.length / 20 > boxHeight / 30) {\n        return string.substr(0, length) + '...';\n      } else {\n        return string;\n      }\n    };\n\n  });\n","'use strict';\n\n/**\n * @ngdoc directive\n * @name angularBootstrapCalendarApp.directive:mwlCalendarYear\n * @description\n * # mwlCalendarYear\n */\nangular.module('mwl.calendar')\n  .directive('mwlCalendarYear', function($sce, $timeout, calendarHelper, moment) {\n    return {\n      templateUrl: 'templates/year.html',\n      restrict: 'EA',\n      require: '^mwlCalendar',\n      scope: {\n        events: '=calendarEvents',\n        currentDay: '=calendarCurrentDay',\n        eventClick: '=calendarEventClick',\n        eventEditClick: '=calendarEditEventClick',\n        eventDeleteClick: '=calendarDeleteEventClick',\n        editEventHtml: '=calendarEditEventHtml',\n        deleteEventHtml: '=calendarDeleteEventHtml',\n        autoOpen: '=calendarAutoOpen',\n        timespanClick: '=calendarTimespanClick'\n      },\n      link: function postLink(scope, element, attrs, calendarCtrl) {\n\n        var firstRun = false;\n\n        scope.$sce = $sce;\n\n        calendarCtrl.titleFunctions.year = function(currentDay) {\n          return moment(currentDay).format('YYYY');\n        };\n\n        function updateView() {\n          scope.view = calendarHelper.getYearView(scope.events, scope.currentDay);\n\n          //Auto open the calendar to the current day if set\n          if (scope.autoOpen && !firstRun) {\n            scope.view.forEach(function(row, rowIndex) {\n              row.forEach(function(year, cellIndex) {\n                if (year.label == moment(scope.currentDay).format('MMMM')) {\n                  scope.monthClicked(rowIndex, cellIndex, true);\n                  $timeout(function() {\n                    firstRun = false;\n                  });\n                }\n              });\n            });\n          }\n        }\n\n        scope.$watch('currentDay', updateView);\n        scope.$watch('events', updateView, true);\n\n        scope.monthClicked = function(yearIndex, monthIndex, firstRun) {\n\n          if (!firstRun) {\n            scope.timespanClick({$date: scope.view[yearIndex][monthIndex].date.startOf('month').toDate()});\n          }\n\n          var handler = calendarHelper.toggleEventBreakdown(scope.view, yearIndex, monthIndex);\n          scope.view = handler.view;\n          scope.openEvents = handler.openEvents;\n\n        };\n\n        scope.drillDown = function(month) {\n          calendarCtrl.changeView('month', moment(scope.currentDay).clone().month(month).toDate());\n        };\n\n      }\n    };\n  });\n","'use strict';\n\n/**\n * @ngdoc directive\n * @name angularBootstrapCalendarApp.directive:mwlCalendarWeek\n * @description\n * # mwlCalendarWeek\n */\nangular.module('mwl.calendar')\n  .directive('mwlCalendarWeek', function(moment, calendarHelper) {\n    return {\n      templateUrl: 'templates/week.html',\n      restrict: 'EA',\n      require: '^mwlCalendar',\n      scope: {\n        events: '=calendarEvents',\n        currentDay: '=calendarCurrentDay',\n        eventClick: '=calendarEventClick',\n        useIsoWeek: '=calendarUseIsoWeek',\n        weekTitleLabel: '@calendarWeekTitleLabel'\n      },\n      link: function postLink(scope, element, attrs, calendarCtrl) {\n\n        var titleLabel = scope.weekTitleLabel || 'Week {week} of {year}';\n\n        calendarCtrl.titleFunctions.week = function(currentDay) {\n          return titleLabel.replace('{week}', moment(currentDay).week()).replace('{year}', moment(currentDay).format('YYYY'));\n        };\n\n        function updateView() {\n          scope.view = calendarHelper.getWeekView(scope.events, scope.currentDay, scope.useIsoWeek);\n        }\n\n        scope.drillDown = function(day) {\n          calendarCtrl.changeView('day', moment(scope.currentDay).clone().date(day).toDate());\n        };\n\n        scope.$watch('currentDay', updateView);\n        scope.$watch('events', updateView, true);\n\n      }\n    };\n  });\n","'use strict';\n\n/**\n * @ngdoc directive\n * @name angularBootstrapCalendarApp.directive:mwlCalendarMonth\n * @description\n * # mwlCalendarMonth\n */\nangular.module('mwl.calendar')\n  .directive('mwlCalendarMonth', function ($sce, $timeout, $filter, moment, calendarHelper) {\n    return {\n      templateUrl: 'templates/month.html',\n      restrict: 'EA',\n      require: '^mwlCalendar',\n      scope: {\n        events: '=calendarEvents',\n        currentDay: '=calendarCurrentDay',\n        eventClick: '=calendarEventClick',\n        eventEditClick: '=calendarEditEventClick',\n        eventDeleteClick: '=calendarDeleteEventClick',\n        editEventHtml: '=calendarEditEventHtml',\n        deleteEventHtml: '=calendarDeleteEventHtml',\n        autoOpen: '=calendarAutoOpen',\n        useIsoWeek: '=calendarUseIsoWeek',\n        timespanClick: '=calendarTimespanClick'\n      },\n      link: function postLink(scope, element, attrs, calendarCtrl) {\n\n        var firstRun = false;\n\n        scope.$sce = $sce;\n\n        calendarCtrl.titleFunctions.month = function(currentDay) {\n          return $filter('date')(currentDay, 'MMMM yyyy');\n        };\n\n        function updateView() {\n          scope.view = calendarHelper.getMonthView(scope.events, scope.currentDay, scope.useIsoWeek);\n\n          //Auto open the calendar to the current day if set\n          if (scope.autoOpen && !firstRun) {\n            scope.view.forEach(function(week, rowIndex) {\n              week.forEach(function(day, cellIndex) {\n                if (day.inMonth && moment(scope.currentDay).startOf('day').isSame(day.date.startOf('day'))) {\n                  scope.dayClicked(rowIndex, cellIndex, true);\n                  $timeout(function() {\n                    firstRun = false;\n                  });\n                }\n              });\n            });\n          }\n\n        }\n\n        scope.$watch('currentDay', updateView);\n        scope.$watch('events', updateView, true);\n\n        scope.weekDays = calendarHelper.getWeekDayNames(false, scope.useIsoWeek);\n\n        scope.dayClicked = function(rowIndex, cellIndex, firstRun) {\n\n          if (!firstRun) {\n            scope.timespanClick({$date: scope.view[rowIndex][cellIndex].date.startOf('day').toDate()});\n          }\n\n          var handler = calendarHelper.toggleEventBreakdown(scope.view, rowIndex, cellIndex);\n          scope.view = handler.view;\n          scope.openEvents = handler.openEvents;\n\n        };\n\n        scope.drillDown = function(day) {\n          calendarCtrl.changeView('day', moment(scope.currentDay).clone().date(day).toDate());\n        };\n\n        scope.highlightEvent = function(event, shouldAddClass) {\n\n          scope.view = scope.view.map(function(week) {\n\n            week.isOpened = false;\n\n            return week.map(function(day) {\n\n              delete day.highlightClass;\n              day.isOpened = false;\n\n              if (shouldAddClass) {\n                var dayContainsEvent = day.events.filter(function(e) {\n                  return e.$id == event.$id;\n                }).length > 0;\n\n                if (dayContainsEvent) {\n                  day.highlightClass = 'day-highlight dh-event-' + event.type;\n                }\n              }\n\n              return day;\n\n            });\n\n          });\n\n        };\n\n      }\n    };\n  });\n","'use strict';\n\n/**\n * @ngdoc directive\n * @name angularBootstrapCalendarApp.directive:mwlCalendarDay\n * @description\n * # mwlCalendarDay\n */\nangular.module('mwl.calendar')\n  .directive('mwlCalendarDay', function($filter, moment, calendarHelper) {\n    return {\n      templateUrl: 'templates/day.html',\n      restrict: 'EA',\n      require: '^mwlCalendar',\n      scope: {\n        events: '=calendarEvents',\n        currentDay: '=calendarCurrentDay',\n        eventClick: '=calendarEventClick',\n        eventLabel: '@calendarEventLabel',\n        timeLabel: '@calendarTimeLabel',\n        dayViewStart:'@calendarDayViewStart',\n        dayViewEnd:'@calendarDayViewEnd'\n      },\n      link: function postLink(scope, element, attrs, calendarCtrl) {\n\n        var dayViewStart = moment(scope.dayViewStart || '00:00', 'HH:mm');\n        var dayViewEnd = moment(scope.dayViewEnd || '23:00', 'HH:mm');\n\n        scope.days = [];\n        var dayCounter = moment(dayViewStart);\n        for (var i = 0; i <= dayViewEnd.diff(dayViewStart, 'hours'); i++) {\n          scope.days.push({\n            label: dayCounter.format('ha')\n          });\n          dayCounter.add(1, 'hour');\n        }\n\n        calendarCtrl.titleFunctions.day = function(currentDay) {\n          return $filter('date')(currentDay, 'EEEE d MMMM, yyyy');\n        };\n\n        function updateView() {\n          scope.view = calendarHelper.getDayView(scope.events, scope.currentDay, dayViewStart.hours(), dayViewEnd.hours());\n        }\n\n        scope.$watch('currentDay', updateView);\n        scope.$watch('events', updateView, true);\n\n      }\n    };\n  });\n","'use strict';\n\n/**\n * @ngdoc directive\n * @name angularBootstrapCalendarApp.directive:mwlCalendar\n * @description\n * # mwlCalendar\n */\nangular.module('mwl.calendar')\n  .directive('mwlCalendar', function () {\n    return {\n      templateUrl: 'templates/main.html',\n      restrict: 'EA',\n      scope: {\n        events: '=calendarEvents',\n        view: '=calendarView',\n        currentDay: '=calendarCurrentDay',\n        control: '=calendarControl',\n        eventClick: '&calendarEventClick',\n        eventEditClick: '&calendarEditEventClick',\n        eventDeleteClick: '&calendarDeleteEventClick',\n        editEventHtml: '=calendarEditEventHtml',\n        deleteEventHtml: '=calendarDeleteEventHtml',\n        autoOpen: '=calendarAutoOpen',\n        useIsoWeek: '=calendarUseIsoWeek',\n        eventLabel: '@calendarEventLabel',\n        timeLabel: '@calendarTimeLabel',\n        dayViewStart:'@calendarDayViewStart',\n        dayViewEnd:'@calendarDayViewEnd',\n        weekTitleLabel: '@calendarWeekTitleLabel',\n        timespanClick: '&calendarTimespanClick'\n      },\n      controller: function($scope, $timeout, $locale, moment) {\n\n        var self = this;\n\n        this.titleFunctions = {};\n\n        this.changeView = function(view, newDay) {\n          $scope.view = view;\n          $scope.currentDay = newDay;\n        };\n\n        $scope.control = $scope.control || {};\n\n        $scope.control.prev = function() {\n          $scope.currentDay = moment($scope.currentDay).subtract(1, $scope.view).toDate();\n        };\n\n        $scope.control.next = function() {\n          $scope.currentDay = moment($scope.currentDay).add(1, $scope.view).toDate();\n        };\n\n        $scope.control.getTitle = function() {\n          if (!self.titleFunctions[$scope.view]) {\n            return '';\n          }\n          return self.titleFunctions[$scope.view]($scope.currentDay);\n        };\n\n        //Auto update the calendar when the locale changes\n        var firstRunWatcher = true;\n        var unbindWatcher = $scope.$watch(function() {\n          return moment.locale() + $locale.id;\n        }, function() {\n          if (firstRunWatcher) { //dont run the first time the calendar is initialised\n            firstRunWatcher = false;\n            return;\n          }\n          var originalView = angular.copy($scope.view);\n          $scope.view = 'redraw';\n          $timeout(function() { //bit of a hacky way to redraw the calendar, should be refactored at some point\n            $scope.view = originalView;\n          });\n        });\n\n        //Remove the watcher when the calendar is destroyed\n        var unbindDestroyListener = $scope.$on('$destroy', function() {\n          unbindDestroyListener();\n          unbindWatcher();\n        });\n\n      }\n    };\n  });\n"],"sourceRoot":"/source/"}